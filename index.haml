!!! 5
%html(lang="en")

    %head
        %meta{:charset => "utf-8"}
        %title Weather Overview
        %meta{:description => "See current weather in your favorite locations"}
        %meta{:author => "Simon La Personne"}
        %link{:href => "./assets/css/bootstrap.css", :rel => "stylesheet"}
        %link{:href => "./assets/css/starter-template.css", :rel => "stylesheet"}
        %link{:href => "./assets/css/application.css", :rel => "stylesheet"}
  
    %body

        %header
            %nav.navbar.navbar-inverse.navbar-fixed-top
                .container
                    .navbar-header
                        %a.navbar-brand{:href => "#"} Weather Overview

        #main-region.container
            %p Text to be replaced

        %script#location-template{:type => "text/template"}
            %p '<%- title %>' is '<%- name %>'

        %footer

        %script{:type => "text/javascript", :src => "./lib/jquery-2.1.3.js"}
        %script{:type => "text/javascript", :src => "./lib/json2.js"}
        %script{:type => "text/javascript", :src => "./lib/underscore.js"}
        %script{:type => "text/javascript", :src => "./lib/backbone.js"}
        %script{:type => "text/javascript", :src => "./lib/backbone.marionette.js"}
        %script{:type => "text/javascript", :src => "./lib/bootstrap.js"}

        %script{:type => "text/javascript"}
            \var WeatherOverviewApp = new Marionette.Application();

            \WeatherOverviewApp.addRegions({
            \   mainRegion: "#main-region"
            \});

            \WeatherOverviewApp.Location = Backbone.Model.extend({
            \   defaults: {
            \       title: "Default Title"
            \   }
            \});
            
            \WeatherOverviewApp.LocationView = Marionette.ItemView.extend({
            \   template: "#location-template",
            \    events: {
            \       "click p": "alertPosition"
            \   },
            \   alertPosition: function(){
            \       alert('latitude : ' + this.model.escape("latitude") + ', longitude : ' + this.model.escape("longitude"));
            \   }
            \});

            \WeatherOverviewApp.on("start", function(){
            \   var location1 = new WeatherOverviewApp.Location({
            \       name: "Clermont-Ferrand",
            \       latitude: "0.0",
            \       longitude: "0.0"
            \   })
            \   var location1View = new WeatherOverviewApp.LocationView({
            \       model: location1
            \   });
            \   WeatherOverviewApp.mainRegion.show(location1View);
            \});

            \WeatherOverviewApp.start();